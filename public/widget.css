:root{
  --w-bg:#0a0a0f;
  --w-line:rgba(110,168,254,.22);
  --w-accent:#6ea8fe;
  --w-accent2:#7ee1ff;
  --w-text:#e8ecf4;
  --w-muted:rgba(232,236,244,.65);
  --w-radius:14px;
  --w-shadow: 0 18px 60px rgba(0,0,0,.55);
  --w-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
}

.wsx-bubble{
  position:fixed;
  right:20px;
  bottom:20px;
  width:60px;
  height:60px;
  border-radius:50%;
  border:2px solid var(--w-accent);
  background: linear-gradient(135deg, rgba(110,168,254,.2), rgba(126,225,255,.1));
  box-shadow: 0 4px 20px rgba(110,168,254,.3);
  cursor:pointer;
  z-index:999999;
  display:grid;
  place-items:center;
  transition: transform .2s, box-shadow .2s;
}
.wsx-bubble:hover{
  transform: scale(1.1);
  box-shadow: 0 6px 30px rgba(110,168,254,.4);
}
.wsx-icon{ width:28px; height:28px; color: var(--w-accent); }
.wsx-dot{
  position:absolute;
  top:6px;
  right:6px;
  width:12px;height:12px;border-radius:50%;
  background:#f59e0b;
  box-shadow:0 0 10px rgba(245,158,11,.5);
  border: 2px solid var(--w-bg);
}

.wsx-panel{
  position:fixed;
  right:20px;
  bottom:90px;
  width:min(380px, calc(100vw - 40px));
  height:560px;
  border-radius: var(--w-radius);
  border:1px solid var(--w-line);
  background: rgba(10,10,15,.96);
  backdrop-filter: blur(20px);
  box-shadow: var(--w-shadow);
  overflow:hidden;
  z-index:999999;
  display:flex;
  flex-direction:column;
  font-family:var(--w-font);
  color:var(--w-text);
}
.wsx-hidden{ display:none !important; }

.wsx-head{
  padding:16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid var(--w-line);
  background: rgba(110,168,254,.05);
}
.wsx-title{ font-weight:700; font-size:15px; }
.wsx-sub{ font-size:12px; color:var(--w-muted); margin-top:2px; }
.wsx-close{
  width:32px;height:32px;border-radius:8px;
  border:1px solid var(--w-line);
  background: transparent;
  color:var(--w-text);
  cursor:pointer;
  font-size:16px;
  transition: background .2s;
}
.wsx-close:hover{ background: rgba(110,168,254,.1); }

/* Pre-chat Form */
.wsx-prechat{
  flex:1;
  padding:24px;
  display:flex;
  flex-direction:column;
  overflow:auto;
}
.wsx-prechat-header{
  text-align:center;
  margin-bottom:24px;
}
.wsx-prechat-icon{
  font-size:48px;
  margin-bottom:12px;
}
.wsx-prechat-header h3{
  margin:0 0 8px;
  font-size:20px;
  font-weight:700;
}
.wsx-prechat-header p{
  margin:0;
  color:var(--w-muted);
  font-size:14px;
}
.wsx-prechat-form{
  display:flex;
  flex-direction:column;
  gap:16px;
}
.wsx-form-group{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.wsx-form-group label{
  font-size:13px;
  font-weight:600;
  color:var(--w-muted);
}
.wsx-form-group input,
.wsx-form-group select{
  padding:12px;
  border-radius:10px;
  border:1px solid var(--w-line);
  background: rgba(110,168,254,.05);
  color:var(--w-text);
  font-size:14px;
  font-family:var(--w-font);
  outline:none;
  transition: border-color .2s, box-shadow .2s;
}
.wsx-form-group input:focus,
.wsx-form-group select:focus{
  border-color: var(--w-accent);
  box-shadow: 0 0 0 3px rgba(110,168,254,.15);
}
.wsx-form-group select option{
  background: var(--w-bg);
  color: var(--w-text);
}
.wsx-start-btn{
  margin-top:8px;
  padding:14px;
  border-radius:10px;
  border:none;
  background: linear-gradient(135deg, var(--w-accent), var(--w-accent2));
  color:#000;
  font-weight:700;
  font-size:15px;
  cursor:pointer;
  transition: transform .2s, box-shadow .2s;
}
.wsx-start-btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(110,168,254,.4);
}

/* Chat Area */
.wsx-chat-area{
  flex:1;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.wsx-body{
  flex:1;
  padding:16px;
  overflow:auto;
}
.wsx-msg{
  display:flex;
  align-items:flex-start;
  gap:10px;
  margin:12px 0;
  animation: fadeIn .3s ease;
}
@keyframes fadeIn{
  from{ opacity:0; transform:translateY(10px); }
  to{ opacity:1; transform:translateY(0); }
}
.wsx-avatar{
  width:32px;
  height:32px;
  border-radius:50%;
  background: rgba(110,168,254,.15);
  display:grid;
  place-items:center;
  font-size:16px;
  flex-shrink:0;
}
.wsx-msg-content{ flex:1; max-width:85%; }
.wsx-meta{ display:flex; justify-content:space-between; font-size:11px; color:var(--w-muted); margin-bottom:4px; }
.wsx-name{ font-weight:600; color:var(--w-accent2); }
.wsx-bub{
  border:1px solid var(--w-line);
  background: rgba(0,0,0,.3);
  border-radius:12px;
  padding:10px 12px;
  font-size:13px;
  line-height:1.5;
  white-space:pre-wrap;
  word-break: break-word;
}
.wsx-mine{ flex-direction:row-reverse; }
.wsx-mine .wsx-msg-content{ text-align:right; }
.wsx-mine .wsx-bub{
  border-color: rgba(110,168,254,.35);
  background: linear-gradient(135deg, rgba(110,168,254,.2), rgba(126,225,255,.1));
}
.wsx-mine .wsx-meta{ flex-direction:row-reverse; }

.wsx-bot .wsx-name{ color:#22c55e; }
.wsx-agent .wsx-name{ color:#f59e0b; }

.wsx-foot{
  padding:12px 16px;
  border-top:1px solid var(--w-line);
  display:flex;
  gap:8px;
}
.wsx-in{
  flex:1;
  border-radius:10px;
  border:1px solid var(--w-line);
  background: rgba(110,168,254,.05);
  color:var(--w-text);
  padding:12px;
  outline:none;
  font-family:var(--w-font);
  font-size:14px;
}
.wsx-in:focus{
  border-color: var(--w-accent);
}
.wsx-send{
  width:44px;
  height:44px;
  border-radius:10px;
  border:none;
  background: linear-gradient(135deg, var(--w-accent), var(--w-accent2));
  color:#000;
  cursor:pointer;
  display:grid;
  place-items:center;
  transition: transform .2s;
}
.wsx-send:hover{ transform: scale(1.05); }

.wsx-request-agent{
  margin:0 16px 12px;
  padding:10px;
  border-radius:8px;
  border:1px dashed var(--w-accent);
  background: transparent;
  color:var(--w-accent);
  font-size:13px;
  font-weight:600;
  cursor:pointer;
  transition: background .2s;
}
.wsx-request-agent:hover{
  background: rgba(110,168,254,.1);
}

.wsx-toast{
  position:absolute;
  left:16px;
  right:16px;
  bottom:140px;
  background: rgba(0,0,0,.85);
  border:1px solid var(--w-line);
  color: var(--w-text);
  padding:10px 14px;
  border-radius:10px;
  font-size:13px;
  text-align:center;
  opacity:0;
  transform: translateY(10px);
  transition: all .2s ease;
  pointer-events:none;
}
.wsx-toast.wsx-toast-on{
  opacity:1;
  transform: translateY(0);
}

.wsx-typing{
  display:none;
  align-items:center;
  gap:4px;
  padding:8px 16px;
}
.wsx-typing.wsx-typing-on{ display:flex; }
.wsx-typing-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:var(--w-accent);
  animation: typingBounce .6s infinite;
}
.wsx-typing-dot:nth-child(2){ animation-delay:.15s; }
.wsx-typing-dot:nth-child(3){ animation-delay:.3s; }
@keyframes typingBounce{
  0%,100%{ transform:translateY(0); opacity:.5; }
  50%{ transform:translateY(-4px); opacity:1; }
}

/* Quick Reply Buttons */
.wsx-quick-replies{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  padding:12px 16px;
  animation: fadeInUp .3s ease;
}
.wsx-quick-btn{
  padding:10px 16px;
  border-radius:20px;
  border:1px solid var(--w-accent);
  background:rgba(110,168,254,.1);
  color:var(--w-accent);
  font-size:13px;
  font-weight:500;
  cursor:pointer;
  transition: all .2s ease;
  font-family: var(--w-font);
}
.wsx-quick-btn:hover{
  background:var(--w-accent);
  color:var(--w-bg);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(110,168,254,.3);
}
.wsx-quick-btn:active{
  transform: translateY(0);
}
@keyframes fadeInUp{
  from{ opacity:0; transform:translateY(10px); }
  to{ opacity:1; transform:translateY(0); }
}
